builders:
  cc:
    target: ":_cc"
    import: "package:build_native/build_native.dart"
    builder_factories:
      - nativeExtensionCCBuilder
    auto_apply: root_package
    build_to: source
    runs_before:
      - build_native|link
    build_extensions:
      .c:
        - .o
        - .obj
      .cc:
        - .o
        - .obj
      .cpp:
        - .o
        - .obj
      .build_native.yaml:
        - .build_native.log
  link:
    target: ":$default"
    import: "package:build_native/build_native.dart"
    builder_factories:
      - nativeExtensionLinkBuilder
    auto_apply: root_package
    build_to: source
    build_extensions:
      .build_native.yaml:
        - .build_native.log
targets:
  _cc:
    sources:
      - "*.c"
      - "*.cc"
      - "*.cpp"
    builders:
      build_native|cc:
        enabled: true
  $default:
    dependencies:
      - ":_cc"
    sources:
        - "*.build_native.yaml"
    builders:
      build_native|link:
        enabled: true